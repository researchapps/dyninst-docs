<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Edge Predicates &mdash; Dyninst 12.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinx-argparse.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Dyninst
          </a>
              <div class="version">
                12.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The Dataflow API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dataflowAPI/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataflowAPI/index.html#abstractions">Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataflowAPI/index.html#examples">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataflowAPI/index.html#api-reference">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">dynC API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../dynC_API/index.html">DynC API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dynC_API/index.html#dync-language-description">DynC Language Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dynC_API/index.html#the-dyninst-domain">The Dyninst Domain</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Instruction API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../instructionAPI/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../instructionAPI/index.html#instructionapi-modules-and-abstractions">InstructionAPI Modules and Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../instructionAPI/index.html#instructionapi-class-reference">InstructionAPI Class Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Parse API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#abstractions">Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#examples">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#the-parsing-api">The Parsing API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#extending-parseapi">Extending ParseAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#defensive-mode-parsing">Defensive Mode Parsing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Patch API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#abstractions">Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#examples">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#public-api-reference">Public API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#modification-api-reference">Modification API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#plugin-api-reference">Plugin API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../patchAPI/index.html#patchapi-for-dyninst-programmers">PatchAPI for Dyninst Programmers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Stackwalk</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../stackwalk/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stackwalk/index.html#abstractions">Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stackwalk/index.html#api-reference">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stackwalk/index.html#callback-interface-default-implementations">Callback Interface Default Implementations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Symtab API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#abstractions">Abstractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#simple-examples">Simple Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#definitions-and-basic-types">Definitions and Basic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#namespace-symtabapi">Namespace SymtabAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#api-reference-symbol-table-interface">API Reference - Symbol Table Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#api-reference-line-number-interface">API Reference - Line Number Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#api-reference-type-interface">API Reference - Type Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../symtabAPI/index.html#api-reference-dynamic-components">API Reference - Dynamic Components</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dyninst</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Edge Predicates</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/parseAPI/API/EdgePredicate.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="edge-predicates">
<span id="sec-pred"></span><h1>Edge Predicates<a class="headerlink" href="#edge-predicates" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>Edge predicates control iteration over edges. For example, the provided
edge predicate can be used with filter iterators and standard
algorithms, ensuring that only intraprocedural edges are visited during
iteration. Two other examples of edge predicates are provided: only
visits edges that stay in a single function context, and does not visit
edges to the <em>sink</em> block. The following code traverses all of the basic
blocks within a function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#include &lt;boost/filter_iterator.hpp&gt;
using boost::make_filter_iterator;
struct target_block
{
  Block* operator()(Edge* e) { return e-&gt;trg(); }
};


vector&lt;Block*&gt; work;
Intraproc epred; // ignore calls, returns

work.push_back(func-&gt;entry()); // assuming `func&#39; is a Function*

// do_stuff is a functor taking a Block* as its argument
while(!work.empty()) {
    Block * b = work.back();
    work.pop_back();

    Block::edgelist &amp; targets = block-&gt;targets();
    // Do stuff for each out edge
    std::for_each(make_filter_iterator(targets.begin(), epred),
                  make_filter_iterator(targets.end(), epred),
                  do_stuff());
    std::transform(make_filter_iterator(targets.begin(), epred),
                   make_filter_iterator(targets.end(), epred),
                   std::back_inserter(work),
                   std::mem_fun(Edge::trg));
    Block::edgelist::const_iterator found_interproc =
            std::find_if(targets.begin(), targets.end(), Interproc());
    if(interproc != targets.end()) {
            // do something with the interprocedural edge you found
    }
}
</pre></div>
</div>
<p>Anything that can be treated as a function from to a can be used in this
manner. This replaces the beta interface where all s needed to descend
from a common parent class. Code that previously constructed iterators
from an edge predicate should be replaced with equivalent code using
filter iterators as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">OLD</span>
<span class="k">for</span><span class="p">(</span><span class="n">Block</span><span class="p">::</span><span class="n">edgelist</span><span class="p">::</span><span class="n">iterator</span> <span class="n">i</span> <span class="o">=</span> <span class="n">targets</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="n">epred</span><span class="p">);</span>
    <span class="n">i</span> <span class="o">!=</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="n">epred</span><span class="p">);</span>
    <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
<span class="o">//</span> <span class="n">NEW</span>
<span class="n">for_each</span><span class="p">(</span><span class="n">make_filter_iterator</span><span class="p">(</span><span class="n">epred</span><span class="p">,</span> <span class="n">targets</span><span class="o">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">()),</span>
         <span class="n">make_filter_iterator</span><span class="p">(</span><span class="n">epred</span><span class="p">,</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">targets</span><span class="p">,</span><span class="n">end</span><span class="p">()),</span>
         <span class="n">loop_body_as_function</span><span class="p">);</span>
<span class="o">//</span> <span class="n">NEW</span> <span class="p">(</span><span class="n">C</span><span class="o">++</span><span class="mi">11</span><span class="p">)</span>
<span class="k">for</span><span class="p">(</span><span class="n">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">make_filter_iterator</span><span class="p">(</span><span class="n">epred</span><span class="p">,</span> <span class="n">targets</span><span class="o">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">i</span> <span class="o">!=</span> <span class="n">make_filter_iterator</span><span class="p">(</span><span class="n">epred</span><span class="p">,</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">targets</span><span class="o">.</span><span class="n">end</span><span class="p">());</span>
    <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
  <span class="o">//</span> <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1996-2022, Barton P. Miller.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>